# 第四章 第 4 节 理论知识考察

> 原文：[`www.nowcoder.com/tutorial/10056/37b83759505d4d0fb1f667ed5f46be97`](https://www.nowcoder.com/tutorial/10056/37b83759505d4d0fb1f667ed5f46be97)

# 理论知识考查

## 1\. 回答要点

面试中对理论知识掌握情况的考核占了很大比重，主要从深度和广度两方面去考核。

*   深度：比如在问到 TCP 和 UDP 的区别时，面试官希望你能就这个知识点深入回答。除了回答标准答案之外（是否有连接、是否有拥塞控制等等），还需要结合这某些场景去分析要用 TCP 还是 UDP。如果能再深入到架构设计以及源码层面，或者最新技术的话，是更加分的。所以在平时复习时，最好针对某些重点知识多找些资料学习，越深入越好。
*   广度：比如你不一定要对各种中间件非常熟悉，但是你应该知道他们的基本原理。你可以找一些入门资料简单学习一下，然后做好笔记，记下在被问到相关内容时你打算回答哪些内容。

在回答问题时，可以按照以下步骤来体现你对知识掌握的深度和广度：

*   为什么存在（解决了什么问题）
*   基本原理
*   使用场景
*   和其它相比有什么不同
*   架构设计、源码、最新技术

例如在问到数据库索引内容时，可以先说索引可以让数据检索的速度更快，然后说到 B+ 树原理，再说一下各种索引的使用场景，最后再提到 B+ 树和红黑树的不同。

在回答问题时候，注意引导面试官往你想回答的问题上去问。比如刚才提到的数据库索引问题，如果你对红黑树熟悉的话，可以直接说自己对红黑树熟悉，阅读过 Java 中的 TreeMap 和 HashMap 源码，然后问一下面试官是否需要讲一下红黑树的内容。

在回答时一定要注意结构化表达，先按上面的那些步骤回答完之后，再提自己对其中的某些内容熟悉从而引导面试官往这些内容上去问，否则中途打乱的话会导致回答很零散。

![](img/d84f1370a8620d7c9dd485db64e21d0b.png)

## 2\. 举例：Cookie 和 Session

### 2.1 为什么存在

先简单描述一下 Cookie，以及它解决了什么问题。

HTTP 协议本身是无状态的，一个 HTTP 连接被断开后，下一次的 HTTP 连接不能获取到这次 HTTP 连接的信息。无状态使得 HTTP 协议更加简单，从而能处理更多 HTTP 连接。

但在很多情况下需要维护状态信息，例如在用户登录了某个网站后，过了一会儿 HTTP 连接被断开，如果没有状态信息，那么该用户又必须重新进行一次登录，这会严重影响用户体验。

### 2.2 基本原理

Cookie 是服务器发送到用户浏览器并保存在本地的一小块数据，它会在浏览器之后向同一服务器再次发起请求时被携带上，用于告知服务端两个请求是否来自同一用户。

具体创建过程如下：

① 服务器发送的响应报文包含 Set-Cookie 首部字段，客户端得到响应报文后把 Cookie 内容保存到浏览器中。

```cpp
HTTP/1.0 200 OK
Content-type: text/html
Set-Cookie: yummy_cookie=choco
Set-Cookie: tasty_cookie=strawberry
```

② 客户端之后对同一个服务器发送请求时，会从浏览器中取出 Cookie 信息并通过 Cookie 请求首部字段发送给服务器。

```cpp
GET /sample_page.html HTTP/1.1
Host: www.example.org
Cookie: yummy_cookie=choco; tasty_cookie=strawberry
```

### 2.3 使用场景

*   会话状态管理（如用户登录状态、购物车、游戏分数或其它需要记录的信息）
*   个性化设置（如用户自定义设置、主题等）
*   浏览器行为跟踪（如跟踪分析用户行为等）

### 2.4 和 Session 的区别

① 首先介绍一下 Session 的概念。

除了可以将用户信息通过 Cookie 存储在用户浏览器中，也可以利用 Session 存储在服务器端，存储在服务器端的信息更加安全。

Session 可以存储在服务器上的文件、数据库或者内存中。也可以将 Session 存储在 Redis 这种内存型数据库中，效率会更高。

使用 Session 维护用户登录状态的过程如下：

用户进行登录时，用户提交包含用户名和密码的表单，放入 HTTP 请求报文中；
服务器验证该用户名和密码，如果正确则把用户信息存储到 Redis 中，它在 Redis 中的 Key 称为 Session ID；
服务器返回的响应报文的 Set-Cookie 首部字段包含了这个 Session ID，客户端收到响应报文之后将该 Cookie 值存入浏览器中；
客户端之后对同一个服务器进行请求时会包含该 Cookie 值，服务器收到之后提取出 Session ID，从 Redis 中取出用户信息，继续之前的业务操作。
应该注意 Session ID 的安全性问题，不能让它被恶意攻击者轻易获取，那么就不能产生一个容易被猜到的 Session ID 值。此外，还需要经常重新生成 Session ID。在对安全性要求极高的场景下，例如转账等操作，除了使用 Session 管理用户状态之外，还需要对用户进行重新验证，比如重新输入密码，或者使用短信验证码等方式。

② 再对比以下两者的不同点和各自适合的场景。

Cookie 只能存储 ASCII 码字符串，而 Session 则可以存储任何类型的数据，因此在考虑数据复杂性时首选 Session；

Cookie 存储在浏览器中，容易被恶意查看。如果非要将一些隐私数据存在 Cookie 中，可以将 Cookie 值进行加密，然后在服务器进行解密；

对于大型网站，如果用户所有的信息都存储在 Session 中，那么开销是非常大的，因此不建议将所有的用户信息都存储到 Session 中。

### 2.5 引导提问

在回答完上面这些基本的内容后，就可以引导面试官往你熟悉的地方。最好是能提到自己的项目有使用到这些技术，这样更加能突出你有很强的实践能力。

针对 Cookie 和 Session，可以发散的点有以下这些：

*   Cookies 和跨站脚本攻击，从而引导到 Web 攻击技术知识点；
*   分布式 Session，从而引导到分布式知识点。