# 第五章 第 1 节 常见面试题解析

> 原文：[`www.nowcoder.com/tutorial/10054/139a1ddcf8da4a65b1d0926d4facd56a`](https://www.nowcoder.com/tutorial/10054/139a1ddcf8da4a65b1d0926d4facd56a)

#### 1.tcp 和 udp 的区别

基于连接与无连接；对系统资源的要求（TCP 较多，UDP 少）；UDP 程序结构较简单；流模式与数据报模式 ；TCP 保证数据正确性，UDP 可能丢包，TCP 保证数据顺序，UDP 不保证。

#### 2.软硬链接区别

ln 命令创建硬链接,ln -s 命令创建软链接目录不能创建硬链接,并且硬链接不可以跨分区系统创建目录软链接特别有用,并且软链接支持跨分区系统硬链接文件与源文件 inode 相同,软链接文件与源文件 inode 不同删除软链接文件,对源文件及硬链接文件无任何影响删除文件的硬链接文件,对源文件及硬链接文件无任何影响删除链接文件的源文件，对硬链接无影响,会导致软链接失效删除源文件及其硬链接文件,整个文件会被删除

#### 3.网络故障排查思路

ping 本地回环口,确定本机 TCP/IP 协议栈是否正常 ping 本机 IP 地址,确定本地设备及驱动是否正常 ping 同网段主机,确定二层网络是否正常工作 ping 网关地址,确定本地与网络是否正常 ping 公网地址,确定本地路由是否正常 ping 公网域名,确定 DNS 客户端是否正常

#### 4.http 返回状态码

200 成功 301 永久重定向 302,307 临时重定向 304 浏览器缓存 403 请求不到首页,权限被拒绝 404 资源找不到 500 服务器内部错误,程序代码错误 502 找不到后端资源 504 请求超时

#### 5.Nginx 服务本身不能处理 PHP 请求,那么当用户发起 PHP 动态请求时,Nginx 又是如何进行处理的？

两种方法 1.将 PHP 页面的解析请求转发给 Apache 处理 2.将 PHP 页面的解析请求转发给 php-fpm 模块用户 > http 协议 >Nginx > fastcgi 协议 > php-fpmfastcgi 协议是 nginx 连接 phh-fpm 的协议 Nginx 与 Fast-CGI 详细工作流程如下：用户通过 http 协议发起请求,请求会先抵达 LNMP 架构中的 NginxNginx 会根据用户的请求进行判断,这个判断是由 Location 进行完成判断用户请求的是静态页面,Nginx 直接进行处理判断用户请求的是动态页面,Nginx 将该请求交给 fastcgi 协议下发 fastcgi 会将请求交给 php-fpm 管理进程,php-fpm 管理进程接收到后会调用具体的工作线程 warrapwarrap 线程会调用 php 进行解析,如果只是解析代码 php 直接返回如果有查询数据库操作,则由 php 连接数据库,(用户 密码 IP)然后发起查询操作最终数据由 mysql>php>php-fpm>fastcgi>nginx>http>user

#### 6.LVS 与 Nginx 的区别

LVS:抗负载能力强配置性低工作稳定无流量 lvs 基本上能支持所有应用，因为 lvs 工作在第 4 层，所以它可以对几乎所有应用做负载均衡，包括 http、数据库、聊天室等。Nginx:nginx 工作在网络的第 7 层 nginx 对网络的依赖较小，nginx 安装和配置比较简单，测试起来也很方便，因为它基本能把错误用日志打印出来。nginx 也同样能承受很高负载且稳定，nginx 可以检测到服务器内部的故障.

#### 7.IP 地址分类

A1.0.0.1-127.255.255.25410.0.0.0-10.255.255.255B128.0.0.0-191.255.255.255172.16.0.0-172.31.255.255C192.0.0.0-223.255.255.255192.168.0.0-192.168.255.255

#### 8.简述 RAID0 RAID1 RAID5 的特点与原理

RAID0（独立磁盘冗余阵列）必须使用两块或两块以上硬盘组成每块硬盘的大小必须一致是所有动态磁盘中，数据读写最快的（收益)损坏几率相对最高没有磁盘容错功能 RAID1（镜像卷）由两块或 2 的倍数硬盘组每块硬盘大小必须一致硬盘使用率只有 50%，写入速度最慢（那一半去做备份了）拥有磁盘容错功能 RAID5 由三块或三块以上硬盘组成每块硬盘大小必须一致磁盘利用率是 n-1 块盘（一块留做奇偶校验）利用奇偶校验（异或），拥有容错功能（只允许 1 块坏盘）扩展：6 （升级的 5）；10（中和 1、0）

#### 9.vlan 的作用

限制广播域增强局域网的安全性提高网络的健壮性灵活构建虚拟工作组

#### 10.server CPU 过载怎么处理

top p 查看占用 CPU 最高进程 pidcd /proc/pid 确定程序位置看日志 Ps -ajxf 查看进程及其线程

#### 11.DNS 解析流程

浏览器缓存本地 hosts 文件缓存查询本地 DNS 解析器缓存查询本地 DNS 服务器向根 DNS 服务器查询根告诉你下一次应该查询的顶级域名服务器的 IP 地址顶级告诉你下一次应该查询的权限域名服务器权限告诉本地，本地告诉你。递归：我向本地域名服务器发一次，要最终结果。迭代：本地域名服务器发多次。

#### 12.三次握手，四次挥手，为什么是三次握手，不是四次？

客户端 > 请求包连接 syn=1 seq=x 服务端服务端 > 响应客户端 syn=1 ack=x+1 seq=y 客户端客户端 > 建立连接 ack=y+1 seq=x+1 服务端客户端 --> 断开请求 fin=1 seq=x > 服务端服务端 --> 响应断开 fin=1 ack=x+1 seq=y > 客户端服务端 --> 断开连接 fin=1 ack=x+1 seq=z > 客户端客户端 --> 确认断开 fin=1 ack=z+1 seq=n > 服务端三次握手的目的是建立可靠的通信通道，说到通信，简单来说就是数据的发送与接收，而三次握手的最主要目的就是双方确认自己与对方的发送与接收机制正常，四次可以，但没必要，浪费网络资源。

#### 13.OSI 七层都是什么？

应用层抽象语言 —》编码表示层编码 —》二进制会话层应用程序的内部识别地址上三层为应用程序对数据进行加工和处理—数据流层下四层为数据传输层面—传输流层传输层 分段（关注 MTU）、端口号（0-65535） TCP/UDP 网络层逻辑寻址—临时、范围数据链路层（可选）物理寻址—固定、硬件 介质访问控制、控制物理层（核心功能）物理层

#### 14.Linux 系统启动过程

服务器加电，加载 BIOS 信息，BIOS 进行系统检测加载启动引导程序（grub）由 grub 加载系统内核系统内核重新自检，并加载硬件驱动由内核启动系统第一个进程/sbin/init 由/sbin/init 进程调用/etc/init/rcS.conf，进行系统初始化配置由/etc/init/rcS.conf 调用/etc/inittab,确定系统的默认运行级别确定默认运行级别后，调用/etc/init/rc.conf 配置文件运行相应的运行级别目录/etc/rc[0-6].d/中的脚本在启动登录界面之前，执行/etc/rc.d/rc.local 中的程序

#### 15.有关端口命令

netstat -anp 查看哪些端口被打开 lsof -i : $PORT 看应用改端口的程序 netstat -lt 列举监听 TCP 的端口

#### 16.find 与 find | xargs COMMAND

find 传递查到的文件路径至后面的命令时，是先查出所有符合条件的文件路径，并一次性传递给后面的命令，但是有些命令不能直接接受过长的参数，此时命令执行失败，这时就有了 xargs.

#### 17.crontab

分时日月周

#### 18.统计出 establish 状态的连接数有多少?

netstat -an |grep 80 |grep ESTABLISHED |wc -l

#### 19.进程和线程的关系和区别

进程是具有一定独立功能的程序关于某个数据集合上的一次运行活动，进程是系统进行资源分配和调度的一个独立单位。线程是进程的一个实体，是 CPU 调度和分派的基本单位，它是比进程更小的能独立运行的基本单位。线程自己基本上不拥有系统资源，只拥有一点在运行中必不可少的资源（如程序计数器，一组寄存器和栈），但是它可与同属一个进程的其他的线程共享进程所拥有的全部资源。关系：一个线程可以创建和撤销另一个线程；同一个进程中的多个线程之间可以并发执行。相对进程而言，线程是一个更加接近于执行体的概念，它可以与同进程中的其他线程共享数据，但拥有自己的栈空间，拥有独立的执行序列。区别：1) 简而言之,一个程序至少有一个进程,一个进程至少有一个线程。2) 线程是程序执行的最小单位，进程是操作系统分配资源的最小单位。3) 另外，进程在执行过程中拥有独立的内存单元，而多个线程共享内存，从而极大地提高了程序的运行效率。

#### 20.python 列表和元组的区别

元组和列表都属于序列。列表属于可变序列，它的元素可以随时修改或者删除，而元组属于不可变序列，其中的元素是不能修改的，除非整体重新赋值。列表可以使用多种方法实现添加和修改列表元素，而元组没有办法，因为不能想元组中添加或修改元素，同样也不能删除元素列表可以使用切片方法访问和修改列表中的元素，元组也支持切片，但是它只支持通过切片访问元组中的元素，不支持修改元组比列表中的访问和处理速度更快，所以如果只需要对其中的元素进行访问，而不进行任何修改，建议使用元组。列表不能作为字典类型中的键，而元组是可以的。

#### 21.浏览器输入 URL 后发生了什么？

浏览器的地址栏输入 URL 并按下回车。浏览器查找当前 URL 是否存在缓存，并比较缓存是否过期。DNS 解析 URL 对应的 IP。根据 IP 建立 TCP 连接（三次握手）。HTTP 发起请求。服务器处理请求，浏览器接收 HTTP 响应。渲染页面，构建 DOM 树。关闭 TCP 连接（四次挥手）。

#### 22.python 列表生成式和列表生成器的区别

内存：列表生成式：受到内存限制，列表的容量是有限的，如果数量级过大， 列表生成式就会占用很大的内存生成器：不是立即把结果写入内存， 而是保存的一种计算方式，通过不断的获取，可以获取到相应的位置的值,所以占用的内存仅仅是对计算对象的保存。经常用的一种获取方式是 next 方式，或者我们经常用的是 for 循环。语法：列表生成式使用中括号。而列表生成器使用大括号。返回值形式不同。

#### 23.Nginx 常用的一些模块

Nginx 目录索引 Nginx 状态监控 Nginx 访问控制

#### 24.Nginx 负载均衡后端状态

Down backup max_fails fail_timout max_conns

#### 25.Nginx 调度算法

轮询、weight、ip_hash、url_hash、least_conn、wlsc

#### 26.Nginx 代理增加客户端真实 IP 显示以及携带域名访问

proxy_set_header X-Real-Ipproxy_set_header X-Forwarded-Forproxy_set_header Host

#### 27.常见的 ansible 模块

command、shell、script、copy、file、fetch、yum、service、cron、setup 等

#### 28.ansible playbook 的一些拓展功能

在剧本中设置变量信息在剧本中设置注册信息在剧本中设置判断信息在剧本中设置循环信息在剧本中设置错误忽略在剧本中设置标签信息在剧本中进行剧本整合

#### 29.Keepalived 实质 VRRP 工作原理

将所有设备加入到一个虚拟组中具有相同的虚拟 IP(会有对应的虚拟 MAC)主机会在发送数据的时候,在数据包的目标地址写上虚拟的 IP 及 MAC 虚拟组收到数据后,会将目标地址转换成当前虚拟组的 master 设备的 IP 和 MAC 角色：一主多备实际工作角色：主通过优先级来选举主备越高越优先

#### 30.什么是 python 模块？Python 中有哪些常用的内置模块？

Python 模块是包含 Python 代码的.py 文件。此代码可以是函数类或变量。一些常用的内置模块包括：sys、math、random、data time、JSON。

#### 31.**什么是 __init__?**

__new__ 在内存空间为对象分配空间，返回对象的引用；__init__ 初始化对象，定义实例属性。

#### 32.当 Python 退出时，为什么不清除所有分配的内存？

当 Python 退出时，尤其是那些对其他对象具有循环引用的 Python 模块或者从全局名称空间引用的对象并没有被解除分配或释放。无法解除分配 C 库保留的那些内存部分。退出时，由于拥有自己的高效清理机制，Python 会尝试取消分配/销毁其他所有对象。

#### 33.深拷贝和浅拷贝有什么区别？

在创建新实例类型时使用浅拷贝，并保留在新实例中复制的值。浅拷贝用于复制引用指针，就像复制值一样。这些引用指向原始对象，并且在类的任何成员中所做的更改也将影响它的原始副本。浅拷贝允许更快地执行程序，它取决于所使用的数据的大小。深拷贝用于存储已复制的值。深拷贝不会将引用指针复制到对象。它引用一个对象，并存储一些其他对象指向的新对象。原始副本中所做的更改不会影响使用该对象的任何其他副本。由于为每个被调用的对象创建了某些副本，因此深拷贝会使程序的执行速度变慢。

#### 34.如何在 Python 中实现多线程？

Python 有一个多线程库，但是用多线程来加速代码的效果并不是那么的好 Python 有一个名为 Global Interpreter Lock（GIL）的结构。GIL 确保每次只能执行一个“线程”。一个线程获取 GIL 执行相关操作，然后将 GIL 传递到下一个线程。

#### 35.Grafana 的相关配置属性

访问地址 IP:3000 账号密码 admin/admin 环境文件 /etc/sysconfig/grafana-server 日志文件 /var/log/grafana 数据库 /var/lib/grafana/grafana.db 配置文件 /etc/grafana/grafana.ini

#### 36.Zabbix 的相关组件

Zabbix Server：负责接收 agent 发送的报告信息的核心组件，所有配置，统计数据及操作数据均由其组织进行；Database Storage:专用于存储所有配置信息，以及由 zabbix 收集的数据；Web interface：zabbix 的 GUI 接口，通常与 Server 运行在同一台主机上 Proxy:可选组件，常用于分布式监控环境中，代理 Server 收集被监控端的监控数据并统一发往 Server 端；Agent：部署在被监控主机上，负责收集本地数据并发往 Server 端或 Proxy 端；

#### 37.几种常见排序算法基本流程

##### **冒泡排序算法**

算法流程 a.比较两个相邻的元素，如果第一个比第二个大，则交换两个元素的位置；b.对每一对相邻的元素做同样的工作，从开始的第一对一致到结尾的最后一对，经过这一步，最后的元素将是最大值；c.针对所有的元素重复以上步骤，除了最后一个；d.持续对越来越少的元素重复以上步骤，直到没有元素需要交换为止；

##### **插入排序算法**

算法流程 a.从第一个元素起，该元素可以认为已经有序 b.从下一个元素起依次取出，让取出的元素依次与左边的有序数列进行比较 c.如果左边的元素大于取出的元素，则左边的元素右移 d.如果左边的元素小于等于取出的元素，则将取出的元素插入到左边元素的右边，或者左边不再有元素，则将取出的元素插入到最左边；e.重复以上过程，直到处理完毕所有的元素为止

##### 选择排序

算法流程 a.从第一个元素起依次取出，并且假定取出的元素为最小值，使用 min 记录该元素的下标 b.使用 min 记录的元素和后续的元素依次进行比较，如果后续元素中有比 min 记录的元素还小的元素，则重新记录该元素的下标到 min 中，也就是后续记录变成了 min 记录的最小值 c.直到 min 记录的最小值和后续所有的元素比较完毕，交换 min 记录的最小值和最开始假定的元素之间的位置，此时最小值被移动到了最左边 d.重复以上过程，直到处理完毕所有元素

##### 快速排序算法

算法流程 a.从样本数列中选择中间元素作为基准值，单独保存起来；b.重组样本数列，将所有小于基准值的元素放在基准值的左边，将所有大于基准值的元素放在基准值的右边，这个过程叫做分组 c.以递归的方式分别对小于基准值的分组和大于基准值的分组进行再次分组，直到处理完毕所有的元素为止

#### 38.常见排序算法时间复杂度

O(N²) : 冒泡排序、选择排序、插入排序 O(NlogN) : 归并、快速排序

#### 39.请问什么是单向链表，如何判断两个单向链表是否相交

##### **单向链表**

单向链表（单链表）是链表的一种，其特点是链表的链接方向是单向的，对链表的访问要通过顺序读取从头部开始；链表是使用指针进行构造的列表；又称为结点列表，因为链表是由一个个结点组装起来的；其中每个结点都有指针成员变量指向列表中的下一个结点。列表是由结点构成，head 指针指向第一个成为表头结点，而终止于最后一个指向 nuLL 的指针。

##### **判断两个链表是否相交**

**方法 1：**链表相交之后，后面的部分节点全部共用，可以用 2 个指针分别从这两个链表头部走到尾部，最后判断尾部指针的地址信息是否一样，若一样则代表链表相交！**方法 2：**可以把其中一个链表的所有节点地址信息存到数组中，然后把另一个链表的每一个节点地址信息遍历数组，若相等，则跳出循环，说明链表相交。进一步优化则是进行 hash 排序，建立 hash 表。

#### 40.**请你说出几种基本的数据结构**

常见的基本的数据结构有链表、栈、队列、树（只列出面试常考的基本数据结构）链表是一种物理存储单元上非连续、非顺序的存储结构，数据元素的逻辑顺序是通过链表中的指针链接次序实现的。链表由一系列节点组成，这些节点不必在内存中相连。每个节点由数据部分 Data 和链部分 Next，Next 指向下一个节点，这样当添加或者删除时，只需要改变相关节点的 Next 的指向，效率很高。栈和队列是比较特殊的线性表 栈是限制插入和删除只能在一个位置上进行的表，后进先出队列只允许在 front 端进行删除操作，在 rear 端进行插入操作，树：树型结构是一类非常重要的非线性数据结构，考察主要以二叉树为主，

#### 41.数据库索引、索引的基本原理、分类

索引是一种特殊的文件(InnoDB 数据表上的索引是表空间的一个组成部分)，它们包含着对数据表里所有记录的引用指针。索引是一种数据结构。数据库索引，是数据库管理系统中一个排序的数据结构，以协助快速查询、更新数据库表中数据。索引的实现通常使用 B 树及其变种 B+树。更通俗的说，索引就相当于目录。为了方便查找书中的内容，通过对内容建立索引形成目录。索引是一个文件，它是要占据物理空间的。

##### 基本原理

索引用来快速地寻找那些具有特定值的记录。如果没有索引，一般来说执行查询时遍历整张表。索引的原理很简单，就是把无序的数据变成有序的查询 1\. 把创建了索引的列的内容进行排序 2\. 对排序结果生成倒排表 3\. 在倒排表内容上拼上数据地址链 4\. 在查询的时候，先拿到倒排表内容，再取出数据地址链，从而拿到具体数据

##### 分类

主键索引单值索引 一个索引只包含单个列，一个表可以有多个单列索引，如果字段会被经常用来检索就可以用。复合索引 一个索引包含多个列，如电话簿上姓+名字。最好不超过 5 个字段唯一索引 所有列的值必须唯一，但是允许有空值普通索引和唯一索引可以称为辅助索 引

#### 42.使用 Mysql 的一些注意事项

避免使用 select *count(1)或 count(列) 代替 count(*)创建表时尽量时 char 代替 varchar 表的字段顺序固定长度的字段优先(即定长的放在前面，不定长的放在后面)组合索引代替多个单列索引（经常使用多个条件查询时）尽量使用短索引使用连接（JOIN）来代替子查询(Sub-Queries)连表时注意条件类型需一致索引散列值（重复少）不适合建索引，例：性别不适合

#### 42.MySQL 的复制原理

在主库上把数据更高记录到二进制日志从库将主库的日志复制到自己的中继日志从库读取中继日志的事件，将其重放到从库数据中