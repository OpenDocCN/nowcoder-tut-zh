# CodeM 2017 美团编程大赛复赛

## 1

有一个树状的城市网络（即 n 个城市由 n-1 条道路连接的连通图），首都为 1 号城市，每个城市售卖价值为 a_i 的珠宝。
你是一个珠宝商，现在安排有 q 次行程，每次行程为从 u 号城市前往 v 号城市（走最短路径），保证 v 在 u 前往首都的最短路径上。 在每次行程开始时，你手上有价值为 c 的珠宝（每次行程可能不同），并且每经过一个城市时（包括 u 和 v ），假如那个城市中售卖的珠宝比你现在手上的每一种珠宝都要优秀（价值更高，即严格大于），那么你就会选择购入。
现在你想要对每一次行程，求出会进行多少次购买事件。

本题知识点

C++工程师 golang 工程师 iOS 工程师 安卓工程师 运维工程师 前端工程师 算法工程师 测试工程师 PHP 工程师 c#工程师 测试开发工程师 大数据开发工程师 Java 工程师 美团 2017

## 2

n 个二维点(a[i],b[i]), 其中 1 ≤ i ≤ n，询问有多少种排列 p（答案对 1e9+7 取模）使得执行以下伪代码后留下的点是 k，即最后 saved=k（其中 1 ≤ k ≤ n）:

```cpp
saved=p[1]
for x from 2 to n
    if a[p[x]] >= a[saved] and b[p[x]] >= b[saved]
        saved=p[x]

```

保证 a[i]和 b[i]分别为一个排列。

本题知识点

组合数学 树状数组 线段树 分治 Java 工程师 C++工程师 安卓工程师 iOS 工程师 运维工程师 前端工程师 算法工程师 PHP 工程师 测试工程师 美团 golang 工程师 c#工程师 测试开发工程师 大数据开发工程师 2017

## 3

美团点评是综合性生活服务平台，覆盖吃喝玩乐。在休闲娱乐版块，有很多轰趴、桌游、密室逃脱类的项目，适合多人一起玩。下面就是出自团队游戏场景中的一个问题。
有 n 个人排成一排，一开始全部面向前方，然后大家一起转身，随机朝左或是朝右转。
转身后，不断检查队列，如果存在两个面对面的相邻的人，则将这两个人从队列中消除；直到不存在两个面对面的相邻的人。
例如 > 表示向右， < 表示向左
队列“>>><<<”的消除过程为，“>>><<<”到“>><<”到“><”到“”（每次去除一对），最后剩下人数为 0。
队列“>><><<<>”的消除过程为，“>><><<<>”到“>><<<>”到“><<>”到“<>”（每次去除一对)，最后剩下人数为 2
求最后剩下人数的期望值。

本题知识点

动态规划 Java 工程师 C++工程师 安卓工程师 iOS 工程师 运维工程师 前端工程师 算法工程师 PHP 工程师 测试工程师 美团 golang 工程师 c#工程师 测试开发工程师 大数据开发工程师 2017

讨论

[hades496](https://www.nowcoder.com/profile/5870424)

递推~

```cpp
f[1]=1;f[2]=1.5;f[3]=2;
for(int i=4;i<=n;i++)
    f[i]=(-(i-2)*f[i-3]+(i-3)*f[i-2]+(i+1)*f[i-1])/i;
printf("%.3lf\n",f[n]);
```

编辑于 2017-07-21 21:36:47

* * *

## 4

有一个古老的帝国，这个帝国有 n 个城邦，这些城邦由恰好 n 条道路连结（每条路连结两个不同的城邦，保证任意两条道路连结的城邦组不同，即没有重边），所有城邦保证连通。
每个城邦有一个神秘的代号 x_i ，每个 x_i 都是一个 [0,p-1] 范围内的非负整数，其中 p 为一个已知的质数。
由于年代过于久远，这些 x_i 已经不为人知了，但是作为一个历史爱好者，你希望考证一下这些 x_i 的值。
幸运的是，你找到了一些线索，对于每条道路你都得到了一个方程，这个方程的形式为：设这条道路连结的两个城邦为 u , v ，以及有三个参数 a , b , c，那么有 a*x_u + b*x_v = c (mod p)，即这是一个在模质数 p 域下的方程。
现在你需要根据这些线索来求出一组满足条件的 x_i ，数据保证有解且解唯一。

本题知识点

树 基环树 Java 工程师 C++工程师 安卓工程师 iOS 工程师 运维工程师 前端工程师 算法工程师 PHP 工程师 测试工程师 美团 golang 工程师 c#工程师 测试开发工程师 大数据开发工程师 2017

讨论

[hades496](https://www.nowcoder.com/profile/5870424)

相当于 n 个方程，n 个未知数，解方程组：1、n 个点 n 条边，必定存在一个环，所以先找出这个环 2、然后联立环上的所有方程，解出任意一个节点 i 的值 x3、从 i 出发，遍历整个图，因为 i 的值 x 已知，可以直接根据一条边解出另一端的节点值，依次类推可以求得所有节点的值整个过程就是把图遍历 3 遍 over.

发表于 2017-07-21 10:20:27

* * *

## 5

有 N 个信号塔，第 i 个塔的位置是 i，信号强度 X_i(X_i 保证互不相同)。 有 N 个人，第 i 个人的位置是 i，一个人往左走一格要 A 秒，往右走一格要 B 秒。 这些人之间要传递信息，具体地，如果 i 有信息，那么 i 会依次做以下操作：
- 选择一个 j 满足 1 ≤ j ≤ i，并找到一个 k 使得 j ≤ k ≤ i 并且 X_k 最大来保证通信。
- i, j 同时向 k 移动，先到的会等另一个人直到两个人都到达。
- 等到 i,j 都到达 k 时，信息的传递瞬间完成，并且 i,j 瞬间回到原来的位置。
- 之后 i 会失去信息，j 会获得信息。
请对每个 i 计算，如果初始 i 有信息，那么最少多少时间以后信息可以传递到 1，并输出最少时间的方案数，方案数对 2³² 取模。 一个方案可以被描述成 P_1=i,P_2,P_3,...,P_t=1，表示信息的传递是 P_1->P_2->P_3-> ...->P_t。 两个方案被认为是不同的当且仅当 t 不同或者存在一个 1 ≤ i ≤ t 使得 P_i 不同。 特殊地，对于 1，我们认为最少时间是 0，方案数为 1。

本题知识点

线段树 分治 Java 工程师 C++工程师 安卓工程师 iOS 工程师 运维工程师 前端工程师 算法工程师 PHP 工程师 测试工程师 美团 golang 工程师 c#工程师 测试开发工程师 大数据开发工程师 2017