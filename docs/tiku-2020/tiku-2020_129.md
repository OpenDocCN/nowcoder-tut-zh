# äºŒåƒé›¶äºŒåã€ç¬¬å››èŒƒå¼ç§‹æ‹›æµ‹è¯•å¼€å‘ç¬”è¯•é¢˜

## 1

SQL ç¼–ç¨‹
æ‰“å°å‡ºæ¯ä¸ªç­çº§çš„åˆ†æ•°å‰ä¸‰åçš„åˆ†æ•°(å‡è®¾æ‰€æœ‰å­¦ç”Ÿä¸­æ²¡æœ‰åˆ†æ•°ç›¸åŒçš„æƒ…å†µ, ä¹Ÿå°±æ˜¯ä¸è€ƒè™‘å¹¶åˆ—ç¬¬ä¸€ç¬¬äºŒç¬¬ä¸‰çš„åœºæ™¯)
è¡¨ç»“æ„ï¼š
id varchar(20),-- ç¼–å·
class varchar(20),-- ç­çº§
score int-- åˆ†æ•°

ä½ çš„ç­”æ¡ˆ

æœ¬é¢˜çŸ¥è¯†ç‚¹

æµ‹è¯•å¼€å‘å·¥ç¨‹å¸ˆ ç¬¬å››èŒƒå¼ 2020

è®¨è®º

[gdut17](https://www.nowcoder.com/profile/279358190)

select

Â Â Â Â a.*

from

Â mscore as a

where Â Â Â 

(select Â 

Â Â Â Â Â count(*)

from

Â Â Â Â Â mscoreÂ as b

where

Â Â Â Â Â b.classÂ = a.class and b.score >= a.score

) <= 3

order by a.classÂ asc, a.score desc;

mysql> selectÂ Â  Â  ->Â  Â  Â a.*
Â  Â  -> from
Â  Â  ->Â  mscore as a
Â  Â  -> whereÂ  Â Â 
Â  Â  -> (selectÂ Â 
Â  Â  ->Â  Â  Â  count(*)
Â  Â  -> from
Â  Â  ->Â  Â  Â  mscore as b
Â  Â  -> where
Â  Â  ->Â  Â  Â  b.class = a.class and b.score >= a.score
Â  Â  -> ) <= 3
Â  Â  -> order by a.class asc, a.score desc;
+------+-------+-------+
| idÂ  Â | class | score |
+------+-------+-------+
| 11Â  Â | 1 ç­Â  Â |Â  Â  98 |
| 13Â  Â | 1 ç­Â  Â |Â  Â  93 |
| 12Â  Â | 1 ç­Â  Â |Â  Â  92 |
| 24Â  Â | 2 ç­Â  Â |Â  Â  76 |
| 22Â  Â | 2 ç­Â  Â |Â  Â  57 |
| 23Â  Â | 2 ç­Â  Â |Â  Â  53 |
| 33Â  Â | 3 ç­Â  Â |Â  Â  98 |
| 35Â  Â | 3 ç­Â  Â |Â  Â  94 |
| 31Â  Â | 3 ç­Â  Â |Â  Â  87 |
+------+-------+-------+
9 rows in set (0.00 sec)

å‘è¡¨äº 2020-07-23 10:26:20

* * *

[git](https://www.nowcoder.com/profile/439081)

DROP TABLE IF EXISTS `classes`;
CREATE TABLE `classes`Â  (
Â  `id` int(11) NOT NULL AUTO_INCREMENT,
Â  `class` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
Â  `score` int(11) NULL DEFAULT NULL,
Â  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 11 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;
INSERT INTO `classes` VALUES (1, 'A', 85);
INSERT INTO `classes` VALUES (2, 'B', 75);
INSERT INTO `classes` VALUES (3, 'A', 90);
INSERT INTO `classes` VALUES (4, 'A', 100);
INSERT INTO `classes` VALUES (5, 'A', 91);
INSERT INTO `classes` VALUES (6, 'B', 89);
INSERT INTO `classes` VALUES (7, 'B', 99);
INSERT INTO `classes` VALUES (8, 'B', 60);
INSERT INTO `classes` VALUES (9, 'A', 65);
INSERT INTO `classes` VALUES (10, 'B', 78);
æ–¹æ³•ä¸€ï¼š select * from classes c where (select count(*) from classes a where a.class=c.class andÂ  a.score>c.score)<3 order by c.class,c.score desc;Â æ–¹æ³•äºŒï¼šÂ select * from classes t where exists(select count(*) from classes tsÂ  where ts.score>=t.scoreÂ  group by ts.class having count(*)<=3) order by class,score desc;æ€§èƒ½åˆ†æï¼šEXPLAIN select * from classes c where (select count(*) from classes a where a.class=c.class andÂ  a.score>c.score)<3 order by c.class,c.score desc;Â 
idÂ Â Â Â select_typeÂ Â Â Â tableÂ Â Â Â typeÂ Â Â Â possible_keysÂ Â Â Â keyÂ Â Â Â key_lenÂ Â Â Â refÂ Â Â Â rowsÂ Â Â Â Extra
1Â Â Â Â PRIMARYÂ Â Â Â cÂ Â Â Â ALLÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 10Â Â Â Â Using where; Using filesort
2Â Â Â Â DEPENDENT SUBQUERYÂ Â Â Â aÂ Â Â Â ALLÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 10Â Â Â Â Using where

EXPLAIN select * from classes t where exists(select count(*) from classes tsÂ  where ts.score>=t.scoreÂ  group by ts.class having count(*)<=3) order by class,score desc;
idÂ Â Â Â select_typeÂ Â Â Â tableÂ Â Â Â typeÂ Â Â Â possible_keysÂ Â Â Â keyÂ Â Â Â key_lenÂ Â Â Â refÂ Â Â Â rowsÂ Â Â Â Extra
1Â Â Â Â PRIMARYÂ Â Â Â tÂ Â Â Â ALLÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 10Â Â Â Â Using where; Using filesort
2Â Â Â Â DEPENDENT SUBQUERYÂ Â Â Â tsÂ Â Â Â ALLÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 10Â Â Â Â Using where; Using temporary; Using filesort éƒ½ä½¿ç”¨äº†Â Using filesortï¼Œæ–¹æ³•äºŒä½¿ç”¨äº† group by ä¼šäº§ç”Ÿ Using temporaryï¼Œä¹Ÿä¸å¥½ã€‚æœ€å¥½çš„ sql åº”è¯¥ä¼˜åŒ–æ‰ 2 ä¸ªã€‚// TODO

å‘è¡¨äº 2019-12-16 10:55:23

* * *

## 2

æ•°æ®ç»“æ„ç¼–ç¨‹ç¼–å†™ä¸€ä¸ªå•é“¾è¡¨ï¼Œè¦æ±‚åŒ…å«ä»¥ä¸‹æ–¹æ³•ï¼šæ’å…¥å¤´èŠ‚ç‚¹ï¼Œåˆ é™¤å¤´ç»“ç‚¹ï¼Œåœ¨ä»»æ„ä½ç½®æ’å…¥æ–°èŠ‚ç‚¹ï¼Œ åœ¨ä»»æ„ä½ç½®åˆ é™¤èŠ‚ç‚¹ã€‚æ‰“å°æ‰€æœ‰èŠ‚ç‚¹ä¿¡æ¯ï¼Œæ ¹æ®ä½ç½®æŸ¥æ‰¾èŠ‚ç‚¹

ä½ çš„ç­”æ¡ˆ

æœ¬é¢˜çŸ¥è¯†ç‚¹

æµ‹è¯•å¼€å‘å·¥ç¨‹å¸ˆ ç¬¬å››èŒƒå¼ 2020

## 3

ç¼–ç¨‹æµ‹è¯•é¢˜ï¼šè¯·ä»ä»¥ä¸‹ 3 é“é¢˜ç›®ä¸­ä»»é€‰ä¸€é“é¢˜è§£ç­”ã€‚
**JAVA**ï¼š ç¼–å†™ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼(è¦æ±‚ä¸åœ¨ç±»åŠ è½½æ—¶è¿›è¡Œåˆå§‹åŒ–)ã€‚ç„¶åç¼–å†™æµ‹è¯•ç¨‹åºè¿›è¡Œæµ‹è¯•ã€‚
**Python**ï¼šå®ç°ä¸€ä¸ªè£…é¥°å™¨ï¼Œè¦æ±‚ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ—¶é—´å•ä½ï¼Œç¬¬äºŒä¸ªæ˜¯çº¿ç¨‹æ•°ã€‚ æ—¶é—´å•ä½å‚æ•°æ”¯æŒ's'å’Œ'ms'ã€‚çº¿ç¨‹æ•°ä¼ å…¥æ•´æ•°ã€‚Â  è¦æ±‚ï¼šè¢«ä¿®é¥°çš„å‡½æ•°æŒ‰ç…§è£…é¥°å™¨ä¸­æŒ‡å®šçš„çº¿ç¨‹æ•°å¯åŠ¨çº¿ç¨‹ï¼ŒåŒæ—¶æ‰“å°å‡½æ•°åä¸æ‰§è¡Œæ—¶é—´ã€‚
**C/C++**ï¼šä½¿ç”¨ 2 ä¸ªæ ˆå®ç°é˜Ÿåˆ—çš„å…ˆè¿›å…ˆå‡ºæ“ä½œå¹¶å†™å‡ºæµ‹è¯•ç¨‹åºã€‚ï¼ˆæ ˆå¯ä»¥ä½¿ç”¨ STL çš„ stack æˆ–æ–°è§„ä¸€ä¸ªç±»æ¥å®ç°ï¼‰

ä½ çš„ç­”æ¡ˆ

æœ¬é¢˜çŸ¥è¯†ç‚¹

æµ‹è¯•å¼€å‘å·¥ç¨‹å¸ˆ ç¬¬å››èŒƒå¼ 2020

è®¨è®º

[git](https://www.nowcoder.com/profile/439081)

double check+volatile+synchronized å•ä¾‹æ¨¡å¼ä¿è¯äº†çº¿ç¨‹å®‰å…¨åˆ›å»ºä¸€ä¸ªå•ä¾‹å¯¹è±¡ã€‚

```cpp
publicÂ classÂ ConfigurationManager{
Â Â Â Â staticÂ volatileÂ ConfigurationManagerÂ instanceÂ =Â null;

Â Â Â Â publicÂ staticÂ ConfigurationManagerÂ getInstance(){
Â Â Â Â Â Â Â Â if(instanceÂ ==Â null){
Â Â Â Â Â Â Â Â Â Â Â Â synchronized(ConfigurationManager.class){
Â Â Â Â Â Â Â Â Â Â Â Â Â if(instanceÂ ==Â null)Â { 
                            instance = new ConfigurationManager(); }
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â returnÂ instance;
Â Â Â Â }

}
```

![](img/e260905f052ddcfa0322c5ee4d9a7e47.png)

å‘è¡¨äº 2019-12-16 11:21:16

* * *

[ç‹å¯Œè´µå•Š](https://www.nowcoder.com/profile/583776694)

ğŸ˜‚

å‘è¡¨äº 2020-07-10 01:48:33

* * *