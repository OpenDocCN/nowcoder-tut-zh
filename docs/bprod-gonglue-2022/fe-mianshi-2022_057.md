# 第六章 第 9 节 前端进阶-网络传输 2

> 原文：[`www.nowcoder.com/tutorial/10072/c961ad3d8a55405da56a5a33f19ee9f0`](https://www.nowcoder.com/tutorial/10072/c961ad3d8a55405da56a5a33f19ee9f0)

#### 5.4 有什么方法可以保持前后端实时通信

**参考答案**：

实现保持前后端实时通信的方式有以下几种

*   WebSocket： IE10 以上才支持，Chrome16, FireFox11,Safari7 以及 Opera12 以上完全支持，移动端形势大
*   event-source: IE 完全不支持（注意是任何版本都不支持），Edge76，Chrome6,Firefox6,Safari5 和 Opera 以上支持， 移动端形势大好
*   AJAX 轮询： 用于兼容低版本的浏览器
*   永久帧（ forever iframe）可用于兼容低版本的浏览器
*   flash socket 可用于兼容低版本的浏览器

**这几种方式的优缺点**

**1.WebSocket**

*   优点：WebSocket 是 HTML5 开始提供的一种在单个 TCP 连接上进行全双工通讯的协议，可从 HTTP 升级而来，浏览器和服务器只需要一次握手，就可以进行持续的，双向的数据传输，因此能显著节约资源和带宽
*   缺点：1\. 兼容性问题:不支持较低版本的 IE 浏览器（IE9 及以下）2.不支持断线重连，需要手写心跳连接的逻辑 3.通信机制相对复杂

**2\. server-sent-event（event-source）**

*   优点：（1）只需一次请求，便可以 stream 的方式多次传送数据，节约资源和带宽 （2）相对 WebSocket 来说简单易用 （3）内置断线重连功能(retry)
*   缺点： （1）是单向的，只支持服务端->客户端的数据传送，客户端到服务端的通信仍然依靠 AJAX，没有”一家人整整齐齐“的感觉（2）兼容性令人担忧，IE 浏览器完全不支持

**3\. AJAX 轮询**

*   优点：兼容性良好，对标低版本 IE
*   缺点：请求中有大半是无用的请求，浪费资源

**4.Flash Socket**

*   缺点：（1）浏览器开启时 flash 需要用户确认，（2）加载时间长，用户体验较差 （3）大多数移动端浏览器不支持 flash，为重灾区
*   优点： 兼容低版本浏览器

**5\. 永久帧（ forever iframe）**

*   缺点： iframe 会产生进度条一直存在的问题，用户体验差
*   优点：兼容低版本 IE 浏览器

**综上，综合兼容性和用户体验的问题，我在项目中选用了 WebSocket ->server-sent-event -> AJAX 轮询这三种方式做从上到下的兼容**

#### 5.5 常见 http status

**参考答案：**

**1XX 系列**：指定客户端应相应的某些动作，代表请求已被接受，需要继续处理。由于 HTTP/1.0 协议中没有定义任何 1xx 状态码，所以除非在某些试验条件下，服务器禁止向此类客户端发送 1xx 响应。

**2XX 系列**：代表请求已成功被服务器接收、理解、并接受。这系列中最常见的有 200、201 状态码。

**3XX 系列**：代表需要客户端采取进一步的操作才能完成请求，这些状态码用来重定向，后续的请求地址（重定向目标）在本次响应的 Location 域中指明。这系列中最常见的有 301、302 状态码。

**4XX 系列**：表示请求错误。代表了客户端看起来可能发生了错误，妨碍了服务器的处理。常见有：401、404 状态码。

**5xx 系列**：代表了服务器在处理请求的过程中有错误或者异常状态发生，也有可能是服务器意识到以当前的软硬件资源无法完成对请求的处理。常见有 500、503 状态码。

**2 开头 （请求成功）表示成功处理了请求的状态代码。**

*   200 （成功） 服务器已成功处理了请求。 通常，这表示服务器提供了请求的网页。
*   201 （已创建） 请求成功并且服务器创建了新的资源。
*   202 （已接受） 服务器已接受请求，但尚未处理。
*   203 （非授权信息） 服务器已成功处理了请求，但返回的信息可能来自另一来源。
*   204 （无内容） 服务器成功处理了请求，但没有返回任何内容。
*   205 （重置内容） 服务器成功处理了请求，但没有返回任何内容。
*   206 （部分内容） 服务器成功处理了部分 GET 请求。

**3 开头 （请求被重定向）表示要完成请求，需要进一步操作。 通常，这些状态代码用来重定向。**

*   300 （多种选择） 针对请求，服务器可执行多种操作。 服务器可根据请求者 (user agent) 选择一项操作，或提供操作列表供请求者选择。
*   301 （永久移动） 请求的网页已永久移动到新位置。 服务器返回此响应（对 GET 或 HEAD 请求的响应）时，会自动将请求者转到新位置。
*   302 （临时移动） 服务器目前从不同位置的网页响应请求，但请求者应继续使用原有位置来进行以后的请求。
*   303 （查看其他位置） 请求者应当对不同的位置使用单独的 GET 请求来检索响应时，服务器返回此代码。
*   304 （未修改） 自从上次请求后，请求的网页未修改过。 服务器返回此响应时，不会返回网页内容。
*   305 （使用代理） 请求者只能使用代理访问请求的网页。 如果服务器返回此响应，还表示请求者应使用代理。
*   307 （临时重定向） 服务器目前从不同位置的网页响应请求，但请求者应继续使用原有位置来进行以后的请求。

**4 开头 （请求错误）这些状态代码表示请求可能出错，妨碍了服务器的处理。**

*   400 （错误请求） 服务器不理解请求的语法。
*   401 （未授权） 请求要求身份验证。 对于需要登录的网页，服务器可能返回此响应。
*   403 （禁止） 服务器拒绝请求。
*   404 （未找到） 服务器找不到请求的网页。
*   405 （方法禁用） 禁用请求中指定的方法。
*   406 （不接受） 无法使用请求的内容特性响应请求的网页。
*   407 （需要代理授权） 此状态代码与 401（未授权）类似，但指定请求者应当授权使用代理。
*   408 （请求超时） 服务器等候请求时发生超时。
*   409 （冲突） 服务器在完成请求时发生冲突。 服务器必须在响应中包含有关冲突的信息。
*   410 （已删除） 如果请求的资源已永久删除，服务器就会返回此响应。
*   411 （需要有效长度） 服务器不接受不含有效内容长度标头字段的请求。
*   412 （未满足前提条件） 服务器未满足请求者在请求中设置的其中一个前提条件。
*   413 （请求实体过大） 服务器无法处理请求，因为请求实体过大，超出服务器的处理能力。
*   414 （请求的 URI 过长） 请求的 URI（通常为网址）过长，服务器无法处理。
*   415 （不支持的媒体类型） 请求的格式不受请求页面的支持。
*   416 （请求范围不符合要求） 如果页面无法提供请求的范围，则服务器会返回此状态代码。
*   417 （未满足期望值） 服务器未满足"期望"请求标头字段的要求。

**5 开头（服务器错误）这些状态代码表示服务器在尝试处理请求时发生内部错误。 这些错误可能是服务器本身的错误，而不是请求出错。**

*   500 （服务器内部错误） 服务器遇到错误，无法完成请求。
*   501 （尚未实施） 服务器不具备完成请求的功能。 例如，服务器无法识别请求方法时可能会返回此代码。
*   502 （错误网关） 服务器作为网关或代理，从上游服务器收到无效响应。
*   503 （服务不可用） 服务器目前无法使用（由于超载或停机维护）。 通常，这只是暂时状态。
*   504 （网关超时） 服务器作为网关或代理，但是没有及时从上游服务器收到请求。
*   505 （HTTP 版本不受支持） 服务器不支持请求中所用的 HTTP 协议版本。

#### 5.6 http 和 https

**参考答案**：

**1\. HTTP 和 HTTPS 的基本概念**

　　HTTP：是互联网上应用最为广泛的一种网络协议，是一个客户端和服务器端请求和应答的标准（TCP），用于从 WWW 服务器传输超文本到本地浏览器的传输协议，它可以使浏览器更加高效，使网络传输减少。

　　HTTPS：是以安全为目标的 HTTP 通道，简单讲是 HTTP 的安全版，即 HTTP 下加入 SSL 层，HTTPS 的安全基础是 SSL，因此加密的详细内容就需要 SSL。

　　HTTPS 协议的主要作用可以分为两种：一种是建立一个信息安全通道，来保证数据传输的安全；另一种就是确认网站的真实性。

**2.HTTP 与 HTTPS 有什么区别？**

　　HTTP 协议传输的数据都是未加密的，也就是明文的，因此使用 HTTP 协议传输隐私信息非常不安全，为了保证 这些隐私数据能加密传输，于是网景公司设计了 SSL（Secure Sockets Layer）协议用于对 HTTP 协议传输的数据进行加密，从而就诞生了 HTTPS。简单来说，HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输、身份认证的网络协议，要比 http 协议安全。

　　HTTPS 和 HTTP 的区别主要如下：

　　1、https 协议需要到 ca 申请证书，一般免费证书较少，因而需要一定费用。

　　2、http 是超文本传输协议，信息是明文传输，https 则是具有安全性的 ssl 加密传输协议。

　　3、http 和 https 使用的是完全不同的连接方式，用的端口也不一样，前者是 80，后者是 443。

　　4、http 的连接很简单，是无状态的；HTTPS 协议是由 SSL+HTTP 协议构建的可进行加密传输、身份认证的网络协议，比 http 协议安全。

#### 5.7 http1.x 和 http2.x 区别

**参考答案**：

http1.x 和 http2.x 主要有以下 4 个区别：

1.  HTTP2 使用的是二进制传送，HTTP1.X 是文本（字符串）传送。

    二进制传送的单位是帧和流。帧组成了流，同时流还有流 ID 标示

2.  HTTP2 支持多路复用

    因为有流 ID，所以通过同一个 http 请求实现多个 http 请求传输变成了可能，可以通过流 ID 来标示究竟是哪个流从而定位到是哪个 http 请求

3.  HTTP2 头部压缩

    HTTP2 通过 gzip 和 compress 压缩头部然后再发送，同时客户端和服务器端同时维护一张头信息表，所有字段都记录在这张表中，这样后面每次传输只需要传输表里面的索引 Id 就行，通过索引 ID 查询表头的值

4.  HTTP2 支持服务器推送

    HTTP2 支持在未经客户端许可的情况下，主动向客户端推送内容

#### 5.8 http 请求方式

**参考答案**：

http 请求方式有以下 8 种，其中 get 和 post 是最常用的：

1、OPTIONS

返回服务器针对特定资源所支持的 HTTP 请求方法，也可以利用向 web 服务器发送‘*’的请求来测试服务器的功能性

2、HEAD

向服务器索与 GET 请求相一致的响应，只不过响应体将不会被返回。这一方法可以再不必传输整个响应内容的情况下，就可以获取包含在响应小消息头中的元信息。

3、GET

向特定的资源发出请求。注意：GET 方法不应当被用于产生“副作用”的操作中，例如在 Web Application 中，其中一个原因是 GET 可能会被网络蜘蛛等随意访问。Loadrunner 中对应 get 请求函数：web_link 和 web_url

4、POST

向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST 请求可能会导致新的资源的建立和/或已有资源的修改。 Loadrunner 中对应 POST 请求函数：web_submit_data,web_submit_form

5、PUT

向指定资源位置上传其最新内容

6、DELETE

请求服务器删除 Request-URL 所标识的资源

7、TRACE

回显服务器收到的请求，主要用于测试或诊断

8、CONNECT

HTTP/1.1 协议中预留给能够将连接改为管道方式的代理服务器。

#### 5.9 HTTPS 如何保证安全

**参考答案**：

**HTTPS**（全称：Hypertext Transfer Protocol over Secure Socket Layer），是以安全为目标的 HTTP 通道，简单讲是 HTTP 的安全版。HTTPS = HTTP + SSL/TLS，如今 SSL 已废弃，所以现在只关注 HTTP + TLS。为了解决 HTTP 协议的问题，HTTPS 引入了**数据加密**和**身份验证机制**。在开始传输数据之前，通过安全可靠的 TLS 协议进行加密，从而保证后续加密传输数据的安全性。

**TLS 协议**：**传输层安全性协议**（Transport Layer Security，**TLS**）及其前身**安全套接层**（Secure Sockets Layer，**SSL**）是一种安全协议，目的是为了保证**网络通信安全**和**数据完整性**。

**受 TLS 协议保护的通信过程**：先对传输的数据进行了加密（使用对称加密算法）。并且对称加密的密钥是为每一个连接唯一生成的（基于 TLS 握手阶段协商的加密算法和共享密钥），然后发送的每条消息都会通过消息验证码（Message authentication code, MAC），来进行消息完整性检查，最后还可以使用公钥对通信双方进行身份验证

**Https 的作用**

*   **内容加密** 建立一个信息安全通道，来保证数据传输的安全；
*   **身份认证** 确认网站的真实性
*   **数据完整性** 防止内容被第三方冒充或者篡改