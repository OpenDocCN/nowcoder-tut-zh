# 第三章 第 6 节 Java-web 开发-6

> 原文：[`www.nowcoder.com/tutorial/10070/26d2668493f346779f344a01fd8a5985`](https://www.nowcoder.com/tutorial/10070/26d2668493f346779f344a01fd8a5985)

## 5\. 其他

#### 5.1 cookie 和 session 的区别是什么？

**参考答案**

1.  存储位置不同：cookie 存放于客户端；session 存放于服务端。
2.  存储容量不同：单个 cookie 保存的数据<=4KB，一个站点最多保存 20 个 cookie；而 session 并没有上限。
3.  存储方式不同：cookie 只能保存 ASCII 字符串，并需要通过编码当时存储为 Unicode 字符或者二进制数据；session 中能够存储任何类型的数据，例如字符串、整数、集合等。
4.  隐私策略不同：cookie 对客户端是可见的，别有用心的人可以分析存放在本地的 cookie 并进行 cookie 欺骗，所以它是不安全的；session 存储在服务器上，对客户端是透明的，不存在敏感信息泄露的风险。
5.  生命周期不同：可以通过设置 cookie 的属性，达到 cookie 长期有效的效果；session 依赖于名为 JSESSIONID 的 cookie，而该 cookie 的默认过期时间为-1，只需关闭窗口该 session 就会失效，因此 session 不能长期有效。
6.  服务器压力不同：cookie 保存在客户端，不占用服务器资源；session 保管在服务器上，每个用户都会产生一个 session，如果并发量大的话，则会消耗大量的服务器内存。
7.  浏览器支持不同：cookie 是需要浏览器支持的，如果客户端禁用了 cookie，则会话跟踪就会失效；运用 session 就需要使用 URL 重写的方式，所有用到 session 的 URL 都要进行重写，否则 session 会话跟踪也会失效。
8.  跨域支持不同：cookie 支持跨域访问，session 不支持跨域访问。

#### 5.2 cookie 和 session 各自适合的场景是什么？

**参考答案**

对于敏感数据，应存放在 session 里，因为 cookie 不安全。

对于普通数据，优先考虑存放在 cookie 里，这样会减少对服务器资源的占用。

#### 5.3 请介绍 session 的工作原理

**参考答案**

session 依赖于 cookie。

当客户端首次访问服务器时，服务器会为其创建一个 session 对象，该对象具有一个唯一标识 SESSIONID。并且在响应阶段，服务器会创建一个 cookie，并将 SESSIONID 存入其中。

客户端通过响应的 cookie 而持有 SESSIONID，所以当它再次访问服务器时，会通过 cookie 携带这个 SESSIONID。服务器获取到 SESSIONID 后，就可以找到与之对应的 session 对象，进而从这个 session 中获取该客户端的状态。

#### 5.4 get 请求与 post 请求有什么区别？

**参考答案**

*   GET 在浏览器回退时是无害的，而 POST 会再次提交请求。
*   GET 产生的 URL 地址可以被 Bookmark，而 POST 不可以。
*   GET 请求会被浏览器主动 cache，而 POST 不会，除非手动设置。
*   GET 请求只能进行 url 编码，而 POST 支持多种编码方式。
*   GET 请求参数会被完整保留在浏览器历史记录里，而 POST 中的参数不会被保留。
*   GET 请求在 URL 中传送的参数是有长度限制的，而 POST 没有。
*   对参数的数据类型，GET 只接受 ASCII 字符，而 POST 没有限制。
*   GET 比 POST 更不安全，因为参数直接暴露在 URL 上，所以不能用来传递敏感信息。
*   GET 参数通过 URL 传递，POST 放在 Request body 中。

#### 5.5 get 请求的参数能放到 body 里面吗？

**参考答案**

GET 请求是可以将参数放到 BODY 里面的，官方并没有明确禁止，但给出的建议是这样不符合规范，无法保证所有的实现都支持。这就意味着，如果你试图这样做，可能出现各种未知的问题，所以应该当避免。

#### 5.6 post 不幂等是为什么？

**参考答案**

HTTP 方法的幂等性是指一次和多次请求某一个资源应该具有同样的副作用。幂等性属于语义范畴，正如编译器只能帮助检查语法错误一样，HTTP 规范也没有办法通过消息格式等语法手段来定义它。

POST 所对应的 URI 并非创建的资源本身，而是资源的接收者。比如：POST `http://www.forum.com/articles`的语义是在`http://www.forum.com/articles`下创建一篇帖子，HTTP 响应中应包含帖子的创建状态以及帖子的 URI。两次相同的 POST 请求会在服务器端创建两份资源，它们具有不同的 URI。所以，POST 方法不具备幂等性。

#### 5.7 页面报 400 错误是什么意思？

**参考答案**

400 状态码标识请求的语义有误，当前请求无法被服务器理解。除非进行修改，否则客户端不应该重复提交这个请求。通常情况下，是本次请求中包含有错误的参数，此时应该排查前端传递的参数。

#### 5.8 请求数据出现乱码该怎么处理？

**参考答案**

服务端出现请求乱码的原因是，客户端编码与服务器解码方案不一致，可以有如下几种解决办法：

1.  将获得的数据按照客户端编码转成 BYTE，再将 BYTE 按服务端编码转成字符串，这种方案对各种请求方式均有效，但是十分的麻烦。
2.  在接受请求数据之前，显示声明实体内容的编码与服务器一致，这种方式只对 POST 请求有效。
3.  修改服务器的配置文件，显示声明请求路径的编码与服务器一致，这种方式只对 GET 请求有效。

#### 5.9 如何在 SpringBoot 框架下实现一个定时任务？

**参考答案**

Spring 给我们提供了可执行定时任务的线程池 ThreadPoolTaskScheduler，该线程池提供了多个可以与执行定时任务的方法，如下图。在 Spring Boot 中，只需要在配置类中启用线程池注解，就可以直接使用这个线程池了。

![](img/d65c2fdceb56b986ec5db02c118f524b.png)

#### 5.10 调用接口时要记录日志，该怎么设计？

**参考答案**

可以定义一个记录日志的组件，并通过 AOP 将其织入到这个接口的调用中。这种方式对接口无需做任何改造，业务代码中也无需增加任何调用的逻辑，完美地消除了记录日志和业务代码的耦合度。

#### 5.11 了解 Spring Boot JPA 吗？

**参考答案**

JPA 即 Java Persistence API，它是一个基于 O/R 映射的标准规范。也就是说它指定以了标准规则，不提供实现，软件提供商可以按照标准规范来实现，而使用者只需按照规范中定义的方式来使用，不用和软件提供商打交道。JPA 主要实现有 Hibernate、EclipseLink、OpenJPA 等，我们使用 JPA 来开发，无论是采用哪一种实现方式都一样。